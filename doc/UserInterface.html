<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class UserInterface - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
</script>

<script src="./js/jquery.js"></script>
<script src="./js/darkfish.js"></script>

<link href="./css/fonts.css" rel="stylesheet">
<link href="./css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="./index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="./table_of_contents.html#pages">Pages</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link">Object
  
</div>

    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-c-new">::new</a>
    
    <li ><a href="#method-i-user_display">#user_display</a>
    
    <li ><a href="#method-i-user_file_read">#user_file_read</a>
    
    <li ><a href="#method-i-user_pattern">#user_pattern</a>
    
    <li ><a href="#method-i-user_prompt_options">#user_prompt_options</a>
    
    <li ><a href="#method-i-user_prompt_ranges">#user_prompt_ranges</a>
    
    <li ><a href="#method-i-user_prompt_write">#user_prompt_write</a>
    
    <li ><a href="#method-i-user_selection">#user_selection</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-UserInterface">
  <h1 id="class-UserInterface" class="class">
    class UserInterface
  </h1>

  <section class="description">
    
<p><a href="UserInterface.html">UserInterface</a> does the display back to the
log. It also handles co-ordinating the specific function requests. This
will need to be greatly expanded for in memory work and Rails.</p>

  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Basic initialization</p>
          
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File UserInterface.rb, line 6</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>
  <span class="ruby-ivar">@file_manager</span>  = <span class="ruby-constant">FileManager</span>.<span class="ruby-identifier">new</span> 
  <span class="ruby-ivar">@text_processor</span> = <span class="ruby-constant">TextProcessor</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-ivar">@file_name</span> = <span class="ruby-string">&quot;&quot;</span>                                        
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-user_display" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">user_display</span><span
            class="method-args">(text_area)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>The first entry in to the utility ends up here. All the other functions
also end up here since this is a visual tool. Everything for formatting the
display is done in the text_area. Any need adjustmest to the display are
done based on the controls “before” and “after”</p>
          
          

          
          <div class="method-source-code" id="user_display-source">
            <pre><span class="ruby-comment"># File UserInterface.rb, line 43</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">user_display</span>(<span class="ruby-identifier">text_area</span>)
  <span class="ruby-ivar">@text_area</span> = <span class="ruby-identifier">text_area</span>                                                  <span class="ruby-comment"># save for user_write</span>
  <span class="ruby-identifier">puts</span><span class="ruby-string">&quot;======== ====5====1====5====2====5====3====5====4====5====5====5====6====5====7====5====8====5====9====5====0====5====1====5====2====5==&quot;</span>
  <span class="ruby-identifier">text_area</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">line</span>, <span class="ruby-identifier">action</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">action</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-string">&quot;before&quot;</span> 
      <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;-------- -------------------------------------------------------- #{action[1]} lines excluded ---------------------------------------------------&quot;</span>
    <span class="ruby-keyword">end</span> 
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">action</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-string">&quot;text&quot;</span> 
      <span class="ruby-identifier">format</span> = <span class="ruby-string">&quot;%08d %-80s&quot;</span> <span class="ruby-operator">%</span> [<span class="ruby-identifier">line</span>, <span class="ruby-identifier">action</span>[<span class="ruby-value">1</span>]]
      <span class="ruby-identifier">puts</span> <span class="ruby-identifier">format</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">action</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-string">&quot;after&quot;</span> 
      <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;-------- -------------------------------------------------------- #{action[1]} lines excluded ----------------------------------------------------&quot;</span>
    <span class="ruby-keyword">end</span> 
  <span class="ruby-keyword">end</span> 
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-user_file_read" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">user_file_read</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>This is the start of the UX where we ask for a file or the selection of a
file for input. The real value of something like this in a command line
interfaces is to be able to save to disk. Of course that is easy to do but
since I never really work in the command line I forgot. Thus we start out
here with a standard tree directory (for the time being only Linux). This
is for the input file but it is the same for output.</p>
          
          

          
          <div class="method-source-code" id="user_file_read-source">
            <pre><span class="ruby-comment"># File UserInterface.rb, line 65</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">user_file_read</span>
  <span class="ruby-identifier">selection</span> = <span class="ruby-string">&quot;&quot;</span>
  <span class="ruby-identifier">file_information</span> = {}     
  <span class="ruby-identifier">puts</span> <span class="ruby-string">&#39;Enter file name or &quot;enter&quot; for directory&#39;</span> 
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">$mode</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;test&quot;</span>                                                        <span class="ruby-comment"># global test switch</span>
    <span class="ruby-constant">ARGF</span>.<span class="ruby-identifier">each_line</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span>                                                    
      <span class="ruby-ivar">@file_name</span> = <span class="ruby-identifier">file</span>.<span class="ruby-identifier">chomp!</span> 
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@file_name</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;&quot;</span>
        <span class="ruby-comment"># initial load of $file_information dealing with / (root) and /home</span>
        <span class="ruby-identifier">directories</span> = <span class="ruby-ivar">@file_manager</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:file_get_initialization</span>)
        <span class="ruby-identifier">file_information</span> = <span class="ruby-ivar">@file_manager</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:file_get_files</span>, <span class="ruby-identifier">directories</span>) 
        <span class="ruby-ivar">@file_name</span> = <span class="ruby-identifier">user_selection</span>(<span class="ruby-identifier">file_information</span>)
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">break</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">file</span> = <span class="ruby-constant">ARGF</span>.<span class="ruby-identifier">readline</span>
    <span class="ruby-ivar">@file_name</span> = <span class="ruby-identifier">file</span>.<span class="ruby-identifier">chomp!</span>  
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@file_name</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;&quot;</span>
      <span class="ruby-comment"># initial load of $file_information dealing with / (root) and /home</span>
      <span class="ruby-identifier">directories</span> = <span class="ruby-ivar">@file_manager</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:file_get_initialization</span>)
      <span class="ruby-identifier">file_information</span> = <span class="ruby-ivar">@file_manager</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:file_get_files</span>, <span class="ruby-identifier">directories</span>) 
      <span class="ruby-ivar">@file_name</span> = <span class="ruby-identifier">user_selection</span>(<span class="ruby-identifier">file_information</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@file_name</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-user_pattern" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">user_pattern</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Regexp pattern matching is used for the line exclude function. Here the
pattern is requested and stored in a global history file. Currently up to 9
search patterns can be stored for basic support. The current search pattern
is returned.</p>
          
          

          
          <div class="method-source-code" id="user_pattern-source">
            <pre><span class="ruby-comment"># File UserInterface.rb, line 16</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">user_pattern</span>
  <span class="ruby-identifier">pattern</span> = <span class="ruby-string">&quot;&quot;</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">$mode</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;test&quot;</span> 
    <span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;Pattern to find in a line:\n &quot;</span>
    <span class="ruby-constant">ARGF</span>.<span class="ruby-identifier">each_line</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">selection</span><span class="ruby-operator">|</span>                                                   
      <span class="ruby-ivar">@pattern</span> = <span class="ruby-identifier">selection</span>.<span class="ruby-identifier">chomp!</span>
      <span class="ruby-keyword">break</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@pattern</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;&quot;</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">pattern</span> = <span class="ruby-constant">ARGF</span>.<span class="ruby-identifier">readline</span>
    <span class="ruby-ivar">@pattern</span> = <span class="ruby-identifier">pattern</span>.<span class="ruby-identifier">chomp!</span> 
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment"># save this search pattern in the next unused search history entry</span>
  <span class="ruby-identifier">search_history</span> = <span class="ruby-identifier">$search_history</span>.<span class="ruby-identifier">to_h</span>
  <span class="ruby-identifier">search_history</span>.<span class="ruby-identifier">each_pair</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">index</span>, <span class="ruby-identifier">pattern</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">pattern</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;&quot;</span>                                                          <span class="ruby-comment"># wait for next open slot</span>
      <span class="ruby-identifier">$search_history</span>[<span class="ruby-node">&quot;#{index}&quot;</span>] = <span class="ruby-node">&quot;#{@pattern}&quot;</span>                            <span class="ruby-comment"># store it for TextProcessor class </span>
      <span class="ruby-keyword">break</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span> 
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@pattern</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-user_prompt_options" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">user_prompt_options</span><span
            class="method-args">(text_area)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Everything up until this point has been assumed to be an exclude request.
These are the fundamental options</p>

<pre class="ruby"><span class="ruby-value">1</span>. <span class="ruby-constant">Additional</span> <span class="ruby-identifier">include</span> <span class="ruby-identifier">pattern</span>
<span class="ruby-value">2</span>. <span class="ruby-constant">Additional</span> <span class="ruby-identifier">exclude</span> <span class="ruby-identifier">pattern</span>
<span class="ruby-value">3</span>. <span class="ruby-constant">Delete</span> <span class="ruby-identifier">all</span> <span class="ruby-identifier">included</span> <span class="ruby-identifier">text</span>
<span class="ruby-value">4</span>. <span class="ruby-constant">Delete</span> <span class="ruby-identifier">all</span> <span class="ruby-identifier">excluded</span> <span class="ruby-identifier">text</span>            
<span class="ruby-value">5</span>. <span class="ruby-constant">Range</span> <span class="ruby-identifier">functions</span>                  
<span class="ruby-value">6</span>. <span class="ruby-constant">Write</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">file</span>  
<span class="ruby-value">7</span>. <span class="ruby-constant">Exit</span>
</pre>
          
          

          
          <div class="method-source-code" id="user_prompt_options-source">
            <pre><span class="ruby-comment"># File UserInterface.rb, line 189</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">user_prompt_options</span>(<span class="ruby-identifier">text_area</span>)
  <span class="ruby-identifier">puts</span> <span class="ruby-value">&lt;&lt;-DELIMITER
  1. Additional include pattern
  2. Additional exclude pattern
  3. Delete all included text
  4. Delete all excluded text
  5. Range functions
  6. Write to file
  7. Exit
    DELIMITER</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">$mode</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;test&quot;</span>                                                  <span class="ruby-comment"># global test switch</span>
    <span class="ruby-constant">ARGF</span>.<span class="ruby-identifier">each_line</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">selection</span><span class="ruby-operator">|</span> 
      <span class="ruby-ivar">@selection</span> = <span class="ruby-identifier">selection</span>.<span class="ruby-identifier">chomp!</span>
      <span class="ruby-keyword">break</span> <span class="ruby-keyword">if</span> (<span class="ruby-string">&quot;0&quot;</span><span class="ruby-operator">..</span><span class="ruby-string">&quot;6&quot;</span>).<span class="ruby-identifier">include?</span>(<span class="ruby-ivar">@selection</span>)    
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">begin</span>
      <span class="ruby-ivar">@selection</span> = <span class="ruby-constant">ARGF</span>.<span class="ruby-identifier">readline</span>
      <span class="ruby-ivar">@selection</span>.<span class="ruby-identifier">chomp!</span>.<span class="ruby-identifier">to_s</span> 
      <span class="ruby-keyword">rescue</span> <span class="ruby-constant">EOFError</span>
      <span class="ruby-keyword">return</span> <span class="ruby-ivar">@selection</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@selection</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-user_prompt_ranges" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">user_prompt_ranges</span><span
            class="method-args">(text_area, text_lines)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>After the initial exclude request you may want some modifications. These
are presented in logical pairs.</p>

<pre class="ruby"><span class="ruby-value">1</span>. <span class="ruby-constant">Include</span> <span class="ruby-identifier">additional</span> <span class="ruby-identifier">lines</span>
<span class="ruby-value">2</span>. <span class="ruby-constant">Exclude</span> <span class="ruby-identifier">additional</span> <span class="ruby-identifier">lines</span>
<span class="ruby-value">3</span>. <span class="ruby-constant">Delete</span> <span class="ruby-identifier">included</span> <span class="ruby-identifier">lines</span>  
<span class="ruby-value">4</span>. <span class="ruby-constant">Delete</span> <span class="ruby-identifier">excluded</span> <span class="ruby-identifier">lines</span>  
<span class="ruby-value">5</span>. <span class="ruby-constant">Insert</span> <span class="ruby-identifier">lines</span>            
<span class="ruby-value">6</span>. <span class="ruby-constant">Delete</span> <span class="ruby-identifier">lines</span>            
<span class="ruby-value">7</span>. <span class="ruby-constant">Copy</span> <span class="ruby-identifier">lines</span>              
<span class="ruby-value">8</span>. <span class="ruby-constant">Move</span> <span class="ruby-identifier">lines</span>  
<span class="ruby-value">9</span>. <span class="ruby-constant">Write</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">file</span>
</pre>

<p>These options let you work with the data</p>
          
          

          
          <div class="method-source-code" id="user_prompt_ranges-source">
            <pre><span class="ruby-comment"># File UserInterface.rb, line 227</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">user_prompt_ranges</span>(<span class="ruby-identifier">text_area</span>, <span class="ruby-identifier">text_lines</span>)
  <span class="ruby-identifier">puts</span> <span class="ruby-value">&lt;&lt;-DELIMITER
  
  Range functions

  Enter 1 5..12  for a range to include additional lines 
  
  1. Include additional lines
  2. Exclude additional lines
  3. Delete included lines
  4. Delete excluded lines
  5. Insert lines
  6. Delete lines
  7. Copy lines 
  8. Move lines
  9. Write to file

    DELIMITER</span>
  <span class="ruby-identifier">index</span> = <span class="ruby-value">1</span>
  <span class="ruby-identifier">selection</span> = <span class="ruby-string">&quot;&quot;</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">$mode</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;test&quot;</span>                                                        <span class="ruby-comment"># global test switch</span>
    <span class="ruby-constant">ARGF</span>.<span class="ruby-identifier">each_line</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">selection_range</span><span class="ruby-operator">|</span>                                          
      <span class="ruby-identifier">selection_range</span> = <span class="ruby-identifier">selection_range</span>.<span class="ruby-identifier">chomp!</span>
      <span class="ruby-ivar">@selection_split</span> = <span class="ruby-identifier">selection_range</span>.<span class="ruby-identifier">split</span>(<span class="ruby-string">&quot; &quot;</span>)                              <span class="ruby-comment"># check if selection is valid </span>
      <span class="ruby-keyword">break</span> <span class="ruby-keyword">if</span> (<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">9</span>).<span class="ruby-identifier">include?</span>(<span class="ruby-ivar">@selection_split</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">to_i</span>)                        <span class="ruby-comment"># index reused from above  </span>
    <span class="ruby-keyword">end</span>                              
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">selection</span> = <span class="ruby-constant">ARGF</span>.<span class="ruby-identifier">readline</span>
    <span class="ruby-ivar">@selection_split</span> = <span class="ruby-identifier">selection</span>.<span class="ruby-identifier">split</span>(<span class="ruby-string">&quot; &quot;</span>) 
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@selection_split</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span>                                                <span class="ruby-comment"># check for range indicated</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">&quot;...&quot;</span>)                                                      <span class="ruby-comment"># range given?  </span>
      <span class="ruby-identifier">range_split</span> = <span class="ruby-identifier">s</span>.<span class="ruby-identifier">split</span>(<span class="ruby-string">&quot;...&quot;</span>)                                            <span class="ruby-comment"># yes, split it for first and last</span>
      <span class="ruby-ivar">@selection_split</span>[<span class="ruby-value">1</span>] = <span class="ruby-identifier">range_split</span>[<span class="ruby-value">0</span>]                                    
      <span class="ruby-ivar">@selection_split</span>[<span class="ruby-value">2</span>] = <span class="ruby-identifier">range_split</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">to_i</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>  
      <span class="ruby-ivar">@selection_split</span>[<span class="ruby-value">2</span>] = <span class="ruby-identifier">selection_split</span>[<span class="ruby-value">2</span>].<span class="ruby-identifier">to_s</span>                            <span class="ruby-comment"># stay with strings</span>
    <span class="ruby-keyword">end</span>                                    
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">&quot;..&quot;</span>)                                                        <span class="ruby-comment"># range given?  </span>
      <span class="ruby-identifier">range_split</span> = <span class="ruby-identifier">s</span>.<span class="ruby-identifier">split</span>(<span class="ruby-string">&quot;..&quot;</span>)                                              <span class="ruby-comment"># yes, split it for first and last</span>
      <span class="ruby-ivar">@selection_split</span>[<span class="ruby-value">1</span>] = <span class="ruby-identifier">range_split</span>[<span class="ruby-value">0</span>]                                    
      <span class="ruby-ivar">@selection_split</span>[<span class="ruby-value">2</span>] = <span class="ruby-identifier">range_split</span>[<span class="ruby-value">1</span>] 
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@selection_split</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">3</span>                                                  <span class="ruby-comment"># check length entered</span>
    <span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;Format is: Selection number then Range (11..23) or Amount with &#39;after&#39; number&quot;</span>
    <span class="ruby-identifier">user_prompt_ranges</span>(<span class="ruby-identifier">text_area</span>, <span class="ruby-identifier">text_lines</span>)                                                        <span class="ruby-comment"># ask again for input</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@arguments</span> = <span class="ruby-ivar">@selection_split</span>  
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@arguments</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-user_prompt_write" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">user_prompt_write</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>File output starts in the directory of the current file. The assumption is
one will want to keep things together or over write the current file.</p>
          
          

          
          <div class="method-source-code" id="user_prompt_write-source">
            <pre><span class="ruby-comment"># File UserInterface.rb, line 132</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">user_prompt_write</span>
    <span class="ruby-ivar">@choice</span> = <span class="ruby-string">&quot;&quot;</span>
    <span class="ruby-ivar">@path</span>  = <span class="ruby-string">&quot;&quot;</span>
    <span class="ruby-identifier">current_file</span> = <span class="ruby-ivar">@file_manager</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:file_history_current</span>)                  <span class="ruby-comment"># get the current file</span>
    <span class="ruby-ivar">@file</span> = <span class="ruby-identifier">current_file</span>
    <span class="ruby-identifier">path_split</span> = <span class="ruby-identifier">current_file</span>.<span class="ruby-identifier">split</span>(<span class="ruby-string">&quot;/&quot;</span>)
    <span class="ruby-identifier">path_split</span>.<span class="ruby-identifier">pop</span>
    <span class="ruby-identifier">path_split</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span> <span class="ruby-ivar">@path</span> = <span class="ruby-node">&quot;#{@path}/#{d}&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">d</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;&quot;</span> } 
    <span class="ruby-ivar">@home</span> = <span class="ruby-node">&quot;/#{path_split.slice!(1)}&quot;</span>                                        <span class="ruby-comment"># ignore root</span>
      <span class="ruby-identifier">puts</span> <span class="ruby-value">&lt;&lt;-DELIMITER
    1. Overwrite: #{@file}
    2. Append:    #{@file} 
    3. New file:  #{@path} 
    4. New path:  #{@home}\n 
      DELIMITER</span>
    <span class="ruby-identifier">selection</span> = <span class="ruby-constant">ARGF</span>.<span class="ruby-identifier">readline</span>
      <span class="ruby-ivar">@selection</span> = <span class="ruby-identifier">selection</span>.<span class="ruby-identifier">chomp!</span> 
      <span class="ruby-keyword">case</span> <span class="ruby-ivar">@choice</span>                                                              <span class="ruby-comment"># @choice actually runs after </span>
        <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;3&quot;</span>
          <span class="ruby-ivar">@path</span> = <span class="ruby-node">&quot;#{@path}/#{@selection}&quot;</span>
          <span class="ruby-identifier">arguments</span> = [<span class="ruby-ivar">@path</span>, <span class="ruby-ivar">@text_area</span>, <span class="ruby-string">&quot;w&quot;</span>]
          <span class="ruby-identifier">result</span> = <span class="ruby-ivar">@file_manager</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:file_write</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>)  
          <span class="ruby-identifier">user_prompt_write</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">result</span>                                      <span class="ruby-comment"># write failed (no permission?)</span>
        <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;4&quot;</span>
          <span class="ruby-ivar">@path</span> = <span class="ruby-node">&quot;#{@home}/#{@selection}&quot;</span>
          <span class="ruby-identifier">arguments</span> = [<span class="ruby-ivar">@path</span>, <span class="ruby-ivar">@text_area</span>, <span class="ruby-string">&quot;w&quot;</span>]
          <span class="ruby-identifier">result</span> = <span class="ruby-ivar">@file_manager</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:file_write</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>)
          <span class="ruby-identifier">user_prompt_write</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">result</span>                                      <span class="ruby-comment"># write failed (no permission?)</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">case</span> <span class="ruby-ivar">@selection</span>
        <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;1&quot;</span>                                                                <span class="ruby-comment"># overwrite the same file</span>
          <span class="ruby-identifier">arguments</span> = [<span class="ruby-ivar">@file</span>, <span class="ruby-ivar">@text_area</span>, <span class="ruby-string">&quot;w&quot;</span>]
          <span class="ruby-ivar">@file_manager</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:file_write</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>)            
        <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;2&quot;</span>                                                                <span class="ruby-comment"># append to the same file</span>
          <span class="ruby-identifier">arguments</span> = [<span class="ruby-ivar">@file</span>, <span class="ruby-ivar">@text_area</span>, <span class="ruby-string">&quot;a&quot;</span>]
          <span class="ruby-ivar">@file_manager</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:file_write</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>)    
        <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;3&quot;</span>
          <span class="ruby-ivar">@choice</span> = <span class="ruby-string">&quot;3&quot;</span>                                                        <span class="ruby-comment"># still need to ask for file name  </span>
        <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;4&quot;</span>
          <span class="ruby-ivar">@choice</span> = <span class="ruby-string">&quot;4&quot;</span>                                                        <span class="ruby-comment"># still need to ask for path and file name</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-comment"># these are the controls for the ARGF loop</span>
<span class="ruby-comment">#      break unless (&quot;1&quot;..&quot;4&quot;).include?(@selection)                            # break if a line of text is read in  </span>
<span class="ruby-comment">#      break if @selection == 1 || @selection == 2                            # break as file is already set</span>
<span class="ruby-comment">#    exit</span>

  <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-user_selection" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">user_selection</span><span
            class="method-args">(file_information)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>List the files from a directory with an index number so it can be selected</p>
          
          

          
          <div class="method-source-code" id="user_selection-source">
            <pre><span class="ruby-comment"># File UserInterface.rb, line 93</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">user_selection</span>(<span class="ruby-identifier">file_information</span>)
  <span class="ruby-identifier">key</span>        = <span class="ruby-string">&quot;root&quot;</span>                                                      <span class="ruby-comment"># linux support only for now</span>
  <span class="ruby-identifier">index</span>      = <span class="ruby-value">0</span>                                                          <span class="ruby-comment"># for user selection</span>
  <span class="ruby-identifier">number</span>      = <span class="ruby-value">0</span>                                                          <span class="ruby-comment"># for selection from table  </span>
  <span class="ruby-identifier">ui</span>          = {} 
  <span class="ruby-comment"># build display for user selection</span>
  <span class="ruby-identifier">file_information</span>.<span class="ruby-identifier">each_pair</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">directory</span>, <span class="ruby-identifier">files</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">files</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>
      <span class="ruby-identifier">ui</span>.<span class="ruby-identifier">store</span>(<span class="ruby-identifier">index</span>, <span class="ruby-identifier">directory</span>)                                        <span class="ruby-comment"># the internal UI</span>
      <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Now in directory: #{directory}&quot;</span>
      <span class="ruby-ivar">@directory</span> = <span class="ruby-identifier">directory</span>
      <span class="ruby-identifier">files</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span> 
        <span class="ruby-keyword">unless</span> <span class="ruby-identifier">file</span>.<span class="ruby-identifier">start_with?</span>(<span class="ruby-string">&quot;.&quot;</span>)
          <span class="ruby-keyword">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-identifier">file</span>)
            <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;#{index} #{file}&quot;</span>
          <span class="ruby-keyword">else</span>
            <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;  #{index} #{file}&quot;</span>
          <span class="ruby-keyword">end</span>
          <span class="ruby-identifier">ui</span>.<span class="ruby-identifier">store</span>(<span class="ruby-identifier">index</span>, <span class="ruby-identifier">file</span>) 
          <span class="ruby-identifier">index</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">$mode</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;test&quot;</span>                                                  <span class="ruby-comment"># global test switch</span>
    <span class="ruby-constant">ARGF</span>.<span class="ruby-identifier">each_line</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">selection</span><span class="ruby-operator">|</span>                                          
      <span class="ruby-identifier">number</span> = <span class="ruby-identifier">selection</span>.<span class="ruby-identifier">chomp!</span>.<span class="ruby-identifier">to_i</span>
      <span class="ruby-keyword">break</span> <span class="ruby-keyword">if</span> (<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-identifier">index</span>).<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">number</span>.<span class="ruby-identifier">to_i</span>)                            <span class="ruby-comment"># index reused from above  </span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">file_name</span> = <span class="ruby-node">&quot;#{@directory}/#{ui[number]}&quot;</span>                              <span class="ruby-comment"># get selection from UI table </span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">file_name</span> = <span class="ruby-constant">ARGF</span>.<span class="ruby-identifier">readline</span>                                              <span class="ruby-comment"># input from command file                    </span>
    <span class="ruby-identifier">p</span> <span class="ruby-node">&quot;UI #{file_name}&quot;</span> 
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://docs.seattlerb.org/rdoc/">RDoc</a> 4.2.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

